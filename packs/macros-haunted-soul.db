{"_id":"t02N8BGuZCCpmV1U","name":"Character creation","type":"script","author":"pdXclp2r5tiEF79G","img":"icons/svg/dice-target.svg","scope":"global","command":"const characterGenerator = game.pirateborg.characterGenerator;\n\nconst validBaseClasses = selectedClasses.filter((selectedClass) => !selectedClass.data.data.requireBaseClass);\nconst baseClass = validBaseClasses[Math.floor(Math.random() * validBaseClasses.length)];\nconst pirateData = await characterGenerator.rollCharacterForClass(baseClass);\n\nconst startingRollItems = await characterGenerator.rollRollItems(selectedClass.data.data.startingRolls);\nconst startingItems = await characterGenerator.findItems(selectedClass.data.data.startingItems);\n\npirateData.items = pirateData.items\n   .filter((item) => item.data.type !== 'class')\n   .concat(startingRollItems)\n   .concat(startingItems)\n   .concat([selectedClass]);\n\npirateData.baseClass = `${baseClass.pack};${baseClass.name}`\n\npirateData.description = `${selectedClass.data.data.flavorText}${pirateData.description}`\n\nif (actor) {\n   await characterGenerator.updateActorWithScvm(actor, pirateData);\n} else {\n   await characterGenerator.createActorWithScvm(pirateData);\n}","folder":null,"sort":0,"permission":{"default":0,"pdXclp2r5tiEF79G":3},"flags":{"core":{"sourceId":"Macro.smnrajcovGMRvDVa"}}}
